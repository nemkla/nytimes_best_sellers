{"ast":null,"code":"var _jsxFileName = \"/Users/knemeth/React/nytimes_best_sellers/src/components/SearchBooks.js\";\nimport React from \"react\";\nimport { Select, MenuItem } from \"@material-ui/core\";\nimport BookList from \"./BookList\";\nimport \"../styles/SearchBooks.css\";\n\nclass SearchBooks extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      categories: [],\n      books: [],\n      category: \"\"\n    };\n    this.handleCategoryChange = this.handleCategoryChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  async handleSubmit(event) {\n    event.preventDefault();\n\n    if (this.state.category === \"\") {\n      return;\n    }\n\n    try {\n      const url = `https://api.nytimes.com/svc/books/v3/lists/current/${this.state.category}.json?api-key=OGDK7aGVDlAT6L8KaYnfASlYi6ydHveG`;\n      const response = await fetch(url);\n      const data = await response.json();\n      this.setState(() => {\n        return { ...this.state,\n          books: data.results.books\n        };\n      });\n    } catch (e) {}\n  }\n\n  async asyncFetch(url) {\n    let response = await fetch(url);\n    if (response.ok) return await response.json();\n    throw new Error(response.status);\n  }\n\n  handleCategoryChange(e) {\n    this.setState({\n      category: e.target.value\n    });\n  }\n\n  async componentDidMount() {\n    try {\n      const url = \"https://api.nytimes.com/svc/books/v3/lists/names.json?api-key=OGDK7aGVDlAT6L8KaYnfASlYi6ydHveG\";\n      const response = await fetch(url);\n      const data = await response.json();\n      this.setState({\n        categories: data.results\n      });\n    } catch (e) {}\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      className: \"form\",\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Select, {\n      className: \"select\",\n      labelId: \"category\",\n      id: \"category\",\n      value: this.state.category,\n      onChange: this.handleCategoryChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 11\n      }\n    }, this.state.categories.map(({\n      list_name_encoded,\n      display_name\n    }) => /*#__PURE__*/React.createElement(MenuItem, {\n      value: list_name_encoded,\n      key: list_name_encoded,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }\n    }, display_name))), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"button\",\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }\n    }, \"Search\")), /*#__PURE__*/React.createElement(BookList, {\n      books: this.state.books,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n\nexport default SearchBooks;","map":{"version":3,"sources":["/Users/knemeth/React/nytimes_best_sellers/src/components/SearchBooks.js"],"names":["React","Select","MenuItem","BookList","SearchBooks","Component","constructor","props","state","categories","books","category","handleCategoryChange","bind","handleSubmit","event","preventDefault","url","response","fetch","data","json","setState","results","e","asyncFetch","ok","Error","status","target","value","componentDidMount","render","map","list_name_encoded","display_name"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Select, MenuItem } from \"@material-ui/core\";\nimport BookList from \"./BookList\";\nimport \"../styles/SearchBooks.css\";\n\nclass SearchBooks extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { categories: [], books: [], category: \"\" };\n    this.handleCategoryChange = this.handleCategoryChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  async handleSubmit(event) {\n    event.preventDefault();\n    if (this.state.category === \"\") {\n      return;\n    }\n    try {\n      const url = `https://api.nytimes.com/svc/books/v3/lists/current/${this.state.category}.json?api-key=OGDK7aGVDlAT6L8KaYnfASlYi6ydHveG`;\n      const response = await fetch(url);\n      const data = await response.json();\n\n      this.setState(() => {\n        return {\n          ...this.state,\n          books: data.results.books,\n        };\n      });\n    } catch (e) {}\n  }\n\n  async asyncFetch(url) {\n    let response = await fetch(url);\n    if (response.ok) return await response.json();\n    throw new Error(response.status);\n  }\n\n  handleCategoryChange(e) {\n    this.setState({ category: e.target.value });\n  }\n  async componentDidMount() {\n    try {\n      const url =\n        \"https://api.nytimes.com/svc/books/v3/lists/names.json?api-key=OGDK7aGVDlAT6L8KaYnfASlYi6ydHveG\";\n      const response = await fetch(url);\n      const data = await response.json();\n      this.setState({ categories: data.results });\n    } catch (e) {}\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <form className=\"form\" onSubmit={this.handleSubmit}>\n          <Select\n            className=\"select\"\n            labelId=\"category\"\n            id=\"category\"\n            value={this.state.category}\n            onChange={this.handleCategoryChange}\n          >\n            {this.state.categories.map(\n              ({ list_name_encoded, display_name }) => (\n                <MenuItem value={list_name_encoded} key={list_name_encoded}>\n                  {display_name}\n                </MenuItem>\n              )\n            )}\n          </Select>\n          <button className=\"button\" type=\"submit\">\n            Search\n          </button>\n        </form>\n        <BookList books={this.state.books} />\n      </React.Fragment>\n    );\n  }\n}\nexport default SearchBooks;\n"]},"metadata":{},"sourceType":"module"}