{"ast":null,"code":"var _jsxFileName = \"/Users/knemeth/React/nytimes_best_sellers/src/components/SearchBooks.js\";\nimport React from \"react\";\nimport { Select, MenuItem } from \"@material-ui/core\";\nimport BookList from \"./BookList\";\nimport \"../styles/SearchBooks.css\";\n\nclass SearchBooks extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      categories: [],\n      books: [],\n      category: \"\"\n    };\n    this.handleCategoryChange = this.handleCategoryChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  async handleSubmit(event) {\n    event.preventDefault();\n\n    if (this.state.category === \"\") {\n      return;\n    }\n\n    try {\n      const url = `https://api.nytimes.com/svc/books/v3/lists/current/${this.state.category}.json?api-key=OGDK7aGVDlAT6L8KaYnfASlYi6ydHveG`;\n      const response = await fetch(url);\n\n      if (!response.ok) {\n        throw Error(response.statusText);\n      }\n\n      const data = await response.json();\n      this.setState(() => {\n        return { ...this.state,\n          books: data.results.books\n        };\n      });\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  handleCategoryChange(e) {\n    this.setState({\n      category: e.target.value\n    });\n  }\n\n  async componentDidMount() {\n    try {\n      const url = \"https://api.nytimes.com/svc/books/v3/lists/names.json?api-key=OGDK7aGVDlAT6L8KaYnfASlYi6ydHveG\";\n      const response = await fetch(url);\n\n      if (!response.ok) {\n        throw Error(response.statusText);\n      }\n\n      const data = await response.json();\n      this.setState({\n        categories: data.results\n      });\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      className: \"form\",\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Select, {\n      className: \"select\",\n      labelId: \"category\",\n      id: \"category\",\n      value: this.state.category,\n      onChange: this.handleCategoryChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 11\n      }\n    }, this.state.categories.map(({\n      list_name_encoded,\n      display_name\n    }) => /*#__PURE__*/React.createElement(MenuItem, {\n      value: list_name_encoded,\n      key: list_name_encoded,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }\n    }, display_name))), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"button\",\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }\n    }, \"Search\")), /*#__PURE__*/React.createElement(BookList, {\n      books: this.state.books,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n\nexport default SearchBooks;","map":{"version":3,"sources":["/Users/knemeth/React/nytimes_best_sellers/src/components/SearchBooks.js"],"names":["React","Select","MenuItem","BookList","SearchBooks","Component","constructor","props","state","categories","books","category","handleCategoryChange","bind","handleSubmit","event","preventDefault","url","response","fetch","ok","Error","statusText","data","json","setState","results","error","console","e","target","value","componentDidMount","render","map","list_name_encoded","display_name"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Select, MenuItem } from \"@material-ui/core\";\nimport BookList from \"./BookList\";\nimport \"../styles/SearchBooks.css\";\n\nclass SearchBooks extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { categories: [], books: [], category: \"\" };\n    this.handleCategoryChange = this.handleCategoryChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  async handleSubmit(event) {\n    event.preventDefault();\n    if (this.state.category === \"\") {\n      return;\n    }\n    try {\n      const url = `https://api.nytimes.com/svc/books/v3/lists/current/${this.state.category}.json?api-key=OGDK7aGVDlAT6L8KaYnfASlYi6ydHveG`;\n      const response = await fetch(url);\n      if (!response.ok) {\n        throw Error(response.statusText);\n      }\n      const data = await response.json();\n\n      this.setState(() => {\n        return {\n          ...this.state,\n          books: data.results.books,\n        };\n      });\n    } catch (error) { console.error(error)}\n  }\n\n  handleCategoryChange(e) {\n    this.setState({ category: e.target.value });\n  }\n  async componentDidMount() {\n    try {\n      const url =\n        \"https://api.nytimes.com/svc/books/v3/lists/names.json?api-key=OGDK7aGVDlAT6L8KaYnfASlYi6ydHveG\";\n      const response = await fetch(url);\n      if (!response.ok) {\n        throw Error(response.statusText);\n      }\n      const data = await response.json();\n      this.setState({ categories: data.results });\n    } catch (error) { console.error(error)}\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <form className=\"form\" onSubmit={this.handleSubmit}>\n          <Select\n            className=\"select\"\n            labelId=\"category\"\n            id=\"category\"\n            value={this.state.category}\n            onChange={this.handleCategoryChange}\n          >\n            {this.state.categories.map(\n              ({ list_name_encoded, display_name }) => (\n                <MenuItem value={list_name_encoded} key={list_name_encoded}>\n                  {display_name}\n                </MenuItem>\n              )\n            )}\n          </Select>\n          <button className=\"button\" type=\"submit\">\n            Search\n          </button>\n        </form>\n        <BookList books={this.state.books} />\n      </React.Fragment>\n    );\n  }\n}\nexport default SearchBooks;\n"]},"metadata":{},"sourceType":"module"}